{% extends 'base.html' %}
{% load i18n %}

{% block content %}
    <h1 class="mb-4">{% trans "My Page" %}</h1>
    <div class="card mb-3">
        <div class="card-body">
            <h2 class="card-title">{% trans "Profile" %}</h2>
            <p><strong>{% trans "Username" %}:</strong> {{ user.username }}</p>
            <p><strong>{% trans "Nickname" %}:</strong> {{ user_profile.nickname }}</p>
            {% if user_profile.avatar %}
                <img src="{{ user_profile.avatar.url }}" alt="{% trans "Avatar" %}" class="img-thumbnail" width="100">
            {% else %}
                <p>{% trans "No avatar set." %}</p>
            {% endif %}
            <p class="mt-3"><a href="{% url 'mypage:profile_edit' %}" class="btn btn-primary">{% trans "Edit Profile" %}</a></p>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-body">
            <h2 class="card-title">{% trans "My Playlists" %}</h2>
            <ul class="list-group">
                {% for playlist in playlists %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <a href="{% url 'mypage:playlist_detail' playlist.id %}">{{ playlist.name }}</a>
                        <div>
                            <a href="{% url 'mypage:edit_playlist' playlist.id %}" class="btn btn-sm btn-info">{% trans "Edit" %}</a>
                            <a href="{% url 'mypage:delete_playlist' playlist.id %}" class="btn btn-sm btn-danger">{% trans "Delete" %}</a>
                        </div>
                    </li>
                {% empty %}
                    <div class="text-center py-5">
                        <p class="lead">{% trans "No playlists created yet." %}</p>
                        <p>{% trans "Start by creating your first playlist!" %}</p>
                        <a href="{% url 'mypage:create_playlist' %}" class="btn btn-success mt-3">{% trans "Create New Playlist" %}</a>
                    </div>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-body">
            <h2 class="card-title">{% trans "Listening History" %}</h2>
            <p><a href="{% url 'mypage:listening_history' %}" class="btn btn-primary">{% trans "View Listening History" %}</a></p>
        </div>
    </div>
{% endblock %}