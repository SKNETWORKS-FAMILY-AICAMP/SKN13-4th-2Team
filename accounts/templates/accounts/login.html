{% extends 'base.html' %}
{% load i18n %}
{% load widget_tweaks %}

{% block content %}
<div class="flex justify-center items-center min-h-[50vh]">
  <div class="bg-[#232323] rounded-xl shadow-lg p-8 max-w-md w-full">
    <h2 class="text-2xl font-bold text-center mb-6">로그인</h2>
    <form id="login-form" method="post" class="space-y-6">
      {% csrf_token %}
      {# form 필드 스타일을 어둡고 글씨도 검정색에 가깝게 바꾸기 위해 add_class 사용 #}
      {% for field in form %}
        <div>
          {{ field.label_tag }}
          {{ field|add_class:"w-full px-4 py-2 rounded-lg border border-[#444] bg-[#191919] text-gray-100 focus:outline-none focus:ring-2 focus:ring-teal-500" }}
          {{ field.errors }}
        </div>
      {% endfor %}
      <button id="login-button" type="submit"
        class="w-full bg-teal-600 hover:bg-teal-700 text-white py-2 rounded font-semibold flex items-center justify-center gap-2 transition">
        <svg id="login-spinner" class="w-4 h-4 animate-spin mr-2 hidden" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="white" stroke-width="4"/>
          <path class="opacity-75" fill="white" d="M4 12a8 8 0 018-8v8H4z"/>
        </svg>
        <span class="button-text">로그인</span>
      </button>
    </form>
    <div class="text-center mt-4">
      <a href="{% url 'accounts:password_reset' %}" class="text-teal-400 hover:underline">비밀번호를 잊으셨나요?</a>
    </div>
    <div class="text-center mt-2 text-gray-400">
      계정이 없으신가요?
      <a href="{% url 'accounts:signup' %}" class="text-teal-400 hover:underline">회원가입</a>
    </div>
  </div>
</div>
<script>
  document.getElementById('login-form').addEventListener('submit', function() {
    const button = document.getElementById('login-button');
    const spinner = document.getElementById('login-spinner');
    const buttonText = button.querySelector('.button-text');

    button.disabled = true;
    spinner.classList.remove('hidden');
    buttonText.textContent = '로그인 중...';
  });
</script>
{% endblock %}
