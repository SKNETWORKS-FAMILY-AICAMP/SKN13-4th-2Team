{% extends 'base.html' %}
{% load i18n %}

{% block content %}
  <div class="max-w-4xl mx-auto p-6 bg-[#2A2A2A] rounded-lg shadow-lg" style="height: 80vh; display: flex; flex-direction: column;">
    <h1 class="text-3xl font-bold text-teal-400 mb-6 text-center">Music Recommender 챗봇</h1>

    <!-- 채팅 메시지 출력 영역 -->
    <div id="chat-window" class="flex-1 overflow-y-auto p-4 bg-[#1F1F1F] rounded mb-4"
         style="scroll-behavior: smooth;">
      <!-- 예시 메시지들 -->
      <div class="mb-4">
        <div class="inline-block bg-teal-600 text-white px-4 py-2 rounded-lg max-w-xs">
          안녕하세요! 어떤 음악을 추천해 드릴까요?
        </div>
      </div>
      <div class="mb-4 flex justify-end">
        <div class="inline-block bg-gray-700 text-gray-200 px-4 py-2 rounded-lg max-w-xs">
          요즘 기분 좋은 팝송 있나요?
        </div>
      </div>
      <div class="mb-4">
        <div class="inline-block bg-teal-600 text-white px-4 py-2 rounded-lg max-w-xs">
          네! 최신 팝송 중 인기 있는 곡 몇 개 추천드릴게요.
        </div>
      </div>
    </div>

    <!-- 메시지 입력 폼 -->
    <form id="chat-form" class="flex gap-2" onsubmit="event.preventDefault(); sendMessage();">
      <input type="text" id="chat-input" placeholder="메시지를 입력하세요..." 
             class="flex-grow px-4 py-2 rounded-lg bg-[#191919] text-gray-100 focus:outline-none focus:ring-2 focus:ring-teal-500" />
      <button type="submit" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg">
        전송
      </button>
    </form>
  </div>

  <script>
    // 임시로 입력된 메시지를 채팅창에 추가하는 JS (실제 챗봇 연동 전용)
    function sendMessage() {
      const input = document.getElementById('chat-input');
      const chatWindow = document.getElementById('chat-window');
      const message = input.value.trim();
      if (!message) return;

      // 사용자가 보낸 메시지 (오른쪽 정렬)
      const userMsgDiv = document.createElement('div');
      userMsgDiv.className = 'mb-4 flex justify-end';
      userMsgDiv.innerHTML = `<div class="inline-block bg-gray-700 text-gray-200 px-4 py-2 rounded-lg max-w-xs">${message}</div>`;
      chatWindow.appendChild(userMsgDiv);

      // 임시 봇 메시지 (왼쪽 정렬)
      const botMsgDiv = document.createElement('div');
      botMsgDiv.className = 'mb-4';
      botMsgDiv.innerHTML = `<div class="inline-block bg-teal-600 text-white px-4 py-2 rounded-lg max-w-xs">[봇 답변] '${message}'에 대한 답변을 준비 중입니다.</div>`;
      chatWindow.appendChild(botMsgDiv);

      chatWindow.scrollTop = chatWindow.scrollHeight;  // 스크롤 아래로

      input.value = '';
      input.focus();
    }
  </script>
{% endblock %}
